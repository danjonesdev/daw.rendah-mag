{"version":3,"sources":["helpers/mutate-object/index.js","store/index.js","components/session-view/channel/sample-pad/index.js","components/session-view/channel/index.js","components/session-view/index.js","components/modal/index.js","components/track-bar/channel-manager/row/effetcs/index.js","components/track-bar/channel-manager/row/index.js","components/track-bar/channel-manager/index.js","components/track-bar/index.js","components/settings/cue-loop/loop/timeline-item/index.js","components/settings/cue-loop/loop/index.js","components/settings/cue-loop/index.js","components/settings/index.js","components/index.js","store/sanity.js","store/map-settings-from-data/index.js","index.js"],"names":["mutateObject","origin","object","property","value","foundObject","gObj","indexMap","findByProperty","o","findValue","concat","isEqual","result","p","hasOwnProperty","push","mutatedSource","keys","last","pop","reduce","k","isObejctMatch","reverse","console","log","createConnectedStore","settings","loops","cueLoop","functions","Channel","props","_useState","useState","_useState2","Object","slicedToArray","sample","setSample","_useState3","_useState4","error","store","Store","useStore","get","useEffect","effects","length","handleEffects","wadSample","Wad","source","file","i","effect","propertyArray","key","properties","defineProperty","name","react_default","a","createElement","className","onClick","play","isLooping","sampleHitInstance","timeStamp","performance","now","timeFromStartOfLoop","loopRestarted","loopInstance","active","startTime","endTime","duration","loopCompleted","timeline","samples","map","item","sample_pad","SessionView","categories","session_view_channel","Modal","type","isActive","toggleModal","class","title","children","Effects","handleChange","e","persist","set","target","Fragment","indents","Math","round","onChange","min","max","loopPorps","Row","modalActive","setModalActive","for","id","checked","modal","effetcs","channel","ChannelManager","row","channel_manager","Loop","loop","_useState5","_useState6","sound","setSound","_useState7","_useState8","loopFinalised","setLoopFinalised","sampleTimeout","loopTime","executeOrder","setTimeout","setInterval","handleSampleInterval","index","timeline_item","loopIndex","sampleIndex","CueLoop","setIsLooping","handleClick","cueLoopNew","loopsNew","cue_loop_loop","assign","Settings","cue_loop","Components","isObject","session_view","track_bar","components_settings","sanityClient","projectId","dataset","useCdn","keyArr","randomKey","number","floor","random","includes","mapSamples","data","currentCategory","category","_key","slug","ii","packs","currentPack","iii","currentSample","pack","asset","_ref","replace","_unique","test","delayTime","wet","feedback","mapSettingsFromData","rootElement","document","getElementById","ReactDOM","render","isFetching","setFetching","setData","fetchData","asyncToGenerator","regenerator_default","mark","_callee2","params","request","wrap","_context3","prev","next","sanity","fetch","then","sanityCategories","_ref2","_callee","_loop","_context2","_context","sanityPacks","warn","stop","delegateYield","abrupt","apply","this","arguments","forLoop","sent","_callee3","_context4","t0","t1","src_store","Container","components"],"mappings":"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","file":"static/js/main.89dd44e9.chunk.js","sourcesContent":["import reverse from 'lodash/reverse';\r\nimport isEqual from 'lodash/isEqual';\r\n\r\nconst mutateObject = (origin, object, property, value) => {\r\n  const gObj = object;\r\n  let foundObject;\r\n  let indexMap = [];\r\n\r\n  function findByProperty(o, findValue) {\r\n    if (o[`${property}`] === findValue) {\r\n      if (isEqual(gObj, o)) {\r\n        return o;\r\n      }\r\n    }\r\n\r\n    let result, p;\r\n    for (p in o) {\r\n      if (o.hasOwnProperty(p) && typeof o[p] === 'object') {\r\n        result = findByProperty(o[p], findValue);\r\n\r\n        if (result) {\r\n          indexMap.push(p);\r\n          return result;\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  function isObejctMatch(object, keys) {\r\n    const last = keys.pop();\r\n    foundObject = keys.reduce((o, k) => o[k], object)[last];\r\n\r\n    // console.log('gObj', gObj);\r\n    // console.log('foundObject', foundObject);\r\n\r\n    if (isEqual(gObj, foundObject)) {\r\n      foundObject[property] = value;\r\n      return object;\r\n    }\r\n  }\r\n\r\n  findByProperty(origin, gObj[property]);\r\n\r\n  const keys = reverse(indexMap);\r\n  const mutatedSource = isObejctMatch(origin, keys);\r\n\r\n  // console.log('keys', keys);\r\n  console.log('mutatedSource', mutatedSource);\r\n\r\n  return mutatedSource;\r\n};\r\n\r\nexport default mutateObject;\r\n","import { createConnectedStore } from \"undux\";\r\n\r\nimport mutateObject from \"../helpers/mutate-object\";\r\n\r\nconst keyArr = [];\r\n\r\n// to replace with sanity _key\r\nconst randomKey = () => {\r\n  const number = Math.floor(Math.random() * 100001);\r\n  if (keyArr.includes(number)) {\r\n    return randomKey();\r\n  }\r\n\r\n  keyArr.push(number);\r\n  return number;\r\n};\r\n\r\n// Create a store with an initial value.\r\nexport default createConnectedStore({\r\n  settings: \"dummy val\",\r\n  loops: \"dummy val\",\r\n  cueLoop: \"dummy val\",\r\n  functions: \"dummy val\"\r\n  // settings: {\r\n  //   _key: randomKey(),\r\n  //   categories: [\r\n  //     {\r\n  //       _key: randomKey(),\r\n  //       name: \"kicks\",\r\n  //       color: \"#000000\",\r\n  //       samples: [\r\n  //         {\r\n  //           _key: randomKey(),\r\n  //           name: \"kick-1\",\r\n  //           active: true,\r\n  //           file: \"https://alemangui.github.io/pizzicato/audio/chop.mp3\",\r\n  //           effects: [\r\n  //             {\r\n  //               _unique: 236472,\r\n  //               name: \"delay\",\r\n  //               test: 1,\r\n  //               properties: {\r\n  //                 _unique: 236472,\r\n  //                 delayTime: 0,\r\n  //                 wet: 0,\r\n  //                 feedback: 0\r\n  //               }\r\n  //             }\r\n  //           ]\r\n  //         },\r\n  //         {\r\n  //           _key: randomKey(),\r\n  //           name: \"kick-2\",\r\n  //           active: true,\r\n  //           file: \"https://alemangui.github.io/pizzicato/audio/chop.mp3\",\r\n  //           effects: [\r\n  //             {\r\n  //               _unique: 236472,\r\n  //               name: \"delay\",\r\n  //               test: 1,\r\n  //               properties: {\r\n  //                 _unique: 236472,\r\n  //                 delayTime: 0,\r\n  //                 wet: 0,\r\n  //                 feedback: 0\r\n  //               }\r\n  //             }\r\n  //           ]\r\n  //         }\r\n  //         // {\r\n  //         //   _key: randomKey(),\r\n  //         //   name: 'kick-2',\r\n  //         //   active: false,\r\n  //         //   file: 'kick-2.wav',\r\n  //         //   effects: [\r\n  //         //     {\r\n  //         //       _unique: 8564,\r\n  //         //       name: 'Delay',\r\n  //         //       test: 1,\r\n  //         //       properties: {\r\n  //         //         _unique: 236472,\r\n  //         //         feedback: 0.8,\r\n  //         //         time: 0.22,\r\n  //         //         mix: 0.75\r\n  //         //       }\r\n  //         //     }\r\n  //         //   ]\r\n  //         // }\r\n  //       ]\r\n  //     },\r\n  //     {\r\n  //       _key: randomKey(),\r\n  //       name: \"snares\",\r\n  //       color: \"#000000\",\r\n  //       samples: [\r\n  //         // {\r\n  //         //   _key: randomKey(),\r\n  //         //   name: 'snare-1',\r\n  //         //   active: true,\r\n  //         //   file: 'https://alemangui.github.io/pizzicato/audio/wah.mp3',\r\n  //         //   effects: [\r\n  //         //     {\r\n  //         //       _unique: 236472,\r\n  //         //       name: 'Delay',\r\n  //         //       test: 1,\r\n  //         //       properties: {\r\n  //         //         _unique: 236472,\r\n  //         //         feedback: 0,\r\n  //         //         time: 0,\r\n  //         //         mix: 0\r\n  //         //       }\r\n  //         //     }\r\n  //         //   ],\r\n  //         //   loop: {\r\n  //         //     _key: randomKey(),\r\n  //         //     isActive: false,\r\n  //         //     instances: []\r\n  //         //   }\r\n  //         // },\r\n  //         {\r\n  //           _key: randomKey(),\r\n  //           name: \"snare-1\",\r\n  //           active: true,\r\n  //           file: \"https://alemangui.github.io/pizzicato/audio/wah.mp3\",\r\n  //           effects: [\r\n  //             {\r\n  //               _unique: 236472,\r\n  //               name: \"delay\",\r\n  //               test: 1,\r\n  //               properties: {\r\n  //                 _unique: 236472,\r\n  //                 delayTime: 0,\r\n  //                 wet: 0,\r\n  //                 feedback: 0\r\n  //               }\r\n  //             }\r\n  //           ]\r\n  //         }\r\n  //         // {\r\n  //         //   _key: randomKey(),\r\n  //         //   name: 'snare-2',\r\n  //         //   active: false,\r\n  //         //   file: 'snare-2.wav'\r\n  //         // }\r\n  //       ]\r\n  //     }\r\n  //   ]\r\n  // },\r\n  // loops: [\r\n  //   // {\r\n  //   //   _key: randomKey(),\r\n  //   //   name: 'kick-1',\r\n  //   //   active: true,\r\n  //   //   file: '',\r\n  //   //   effects: [\r\n  //   //     {\r\n  //   //       _unique: 236472,\r\n  //   //       name: 'delay',\r\n  //   //       test: 1,\r\n  //   //       properties: {\r\n  //   //         _unique: 236472,\r\n  //   //         delayTime: 0,\r\n  //   //         wet: 0,\r\n  //   //         feedback: 0\r\n  //   //       }\r\n  //   //     },\r\n  //   //   ],\r\n  //   // }\r\n  // ],\r\n  // cueLoop: {\r\n  //   _key: randomKey(),\r\n  //   isLooping: false,\r\n  //   loopTime: null\r\n  // },\r\n  // functions: {\r\n  //   _key: randomKey(),\r\n  //   mutateObject: mutateObject\r\n  // }\r\n});\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport Wad from \"web-audio-daw\";\r\nimport isEqual from \"lodash/isEqual\";\r\nimport last from \"lodash/last\";\r\n\r\nimport Store from \"../../../../store\";\r\nimport mutateObject from \"../../../../helpers/mutate-object\";\r\n\r\n// const useCompare = (val: any) => {\r\n//     const prevVal = usePrevious(val)\r\n//     // console.log('prevVal', prevVal);\r\n//     // console.log('val', val);\r\n//     return !isEqual(prevVal, val)\r\n// }\r\n//\r\n// const usePrevious = (value) => {\r\n//     const ref = useRef();\r\n//     useEffect(() => {\r\n//       ref.current = value;\r\n//     });\r\n//     return ref.current;\r\n// }\r\n\r\nfunction Channel(props) {\r\n  const [sample, setSample] = useState(null);\r\n  const [error, setError] = useState(false);\r\n\r\n  const store = Store.useStore();\r\n  const cueLoop = store.get(\"cueLoop\");\r\n  const loops = store.get(\"loops\");\r\n  const settings = store.get(\"settings\");\r\n\r\n  useEffect(() => {\r\n    if (props.effects && props.effects.length) {\r\n      handleEffects();\r\n    } else {\r\n      const wadSample = new Wad({ source: props.file });\r\n      setSample(wadSample);\r\n    }\r\n  }, [props]);\r\n\r\n  const handleEffects = () => {\r\n    var i;\r\n    for (i = 0; i < props.effects.length; i++) {\r\n      const effect = props.effects[i];\r\n      const propertyArray = {};\r\n\r\n      for (let key in effect.properties) {\r\n        if (effect.properties.hasOwnProperty(key)) {\r\n          if (key !== \"_unique\") {\r\n            propertyArray[key] = effect.properties[key] / 10;\r\n          }\r\n        }\r\n      }\r\n\r\n      const wadSample = new Wad({\r\n        source: props.file,\r\n        [effect.name]: propertyArray\r\n      });\r\n\r\n      setSample(wadSample);\r\n    }\r\n  };\r\n\r\n  const handleClick = () => {\r\n    // sample.stop();\r\n    sample.play();\r\n\r\n    // console.log(\"loops\", loops);\r\n    // console.log(\"props\", props);\r\n    // console.log(\"cueLoop\", cueLoop);\r\n\r\n    // if looping\r\n    if (cueLoop.isLooping) {\r\n      const sampleHitInstance = {\r\n        name: props.name,\r\n        file: props.file,\r\n        effects: props.effects,\r\n        timeStamp: performance.now(),\r\n        timeFromStartOfLoop: (cueLoop.loopRestarted) ? performance.now() - cueLoop.loopRestarted : 0,\r\n      };\r\n\r\n      // check if first loop\r\n      if (!loops.length) {\r\n        // if first loop, create loop object + push sample hit to object timeline\r\n        const loopInstance = {\r\n          active: true,\r\n          startTime: performance.now(),\r\n          endTime: null,\r\n          duration: null,\r\n          loopCompleted: false,\r\n          timeline: [sampleHitInstance]\r\n        };\r\n\r\n        loops.push(loopInstance);\r\n        return;\r\n      }\r\n\r\n      // if not first loop, check if last loopCompleted is true,\r\n      // if true, create new instance, else push sample hit to object timelime\r\n      if (loops[loops.length - 1].loopCompleted) {\r\n        const loopInstance = {\r\n          active: true,\r\n          startTime: performance.now(),\r\n          endTime: null,\r\n          duration: null,\r\n          loopCompleted: false,\r\n          timeline: [sampleHitInstance]\r\n        };\r\n\r\n        loops.push(loopInstance);\r\n        return;\r\n      } else {\r\n        loops[loops.length - 1].timeline.push(sampleHitInstance);\r\n      }\r\n    }\r\n\r\n    // console.log(\"loops\", loops);\r\n  };\r\n\r\n  if (sample) {\r\n    return (\r\n      <div className=\"col-24  session-view__channel__pad-wrapper\">\r\n        <div\r\n          className=\"col-24  session-view__channel__pad\"\r\n          onClick={handleClick}\r\n        >\r\n          <div className=\"flex  flex-wrap  align-center  justify-center  h-100\">\r\n            sample {props.name}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"col-24  sample-pad-wrapper\">\r\n        <div className=\"flex  flex-wrap  sample-pad\">error: {props.name}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport default Channel;\r\n","import React from \"react\";\r\nimport SamplePad from \"./sample-pad\";\r\n\r\nfunction Channel(props) {\r\n  return (\r\n    <div className=\"col-6  session-view__channel\">\r\n      <div className=\"flex  flex-wrap  h-100\">\r\n        {props.samples.map(item => {\r\n          if (item.active) {\r\n            return <SamplePad {...item} />;\r\n          }\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Channel;\r\n","import React from \"react\";\r\nimport Channel from \"./channel\";\r\nimport Store from \"../../store\";\r\n\r\nfunction SessionView() {\r\n  const store = Store.useStore();\r\n  const settings = store.get(\"settings\");\r\n\r\n  if (settings.categories) {\r\n    return (\r\n      <div className=\"w-100  flex  flex-wrap  session-view\">\r\n        {settings.categories.map(item => {\r\n          return <Channel {...item} />;\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport default SessionView;\r\n","import React, { useState } from \"react\";\r\n\r\nfunction Modal(props) {\r\n  return (\r\n    <div\r\n      className={`modal  ${props.type} ${props.isActive ? \"is-active\" : \"\"}`}\r\n    >\r\n      <div className=\"modal__header\">\r\n        <span\r\n          className=\"black  modal__header__close\"\r\n          onClick={props.toggleModal}\r\n        >\r\n          x\r\n        </span>\r\n        <h2 class=\"tac  mla  mra  pt3  black\">{props.title}</h2>\r\n      </div>\r\n      <div className=\"modal__body\">{props.children}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Modal;\r\n","import React from \"react\";\r\nimport Store from \"../../../../../store\";\r\n\r\nfunction Effects(props) {\r\n  const store = Store.useStore();\r\n  const settings = store.get(\"settings\");\r\n  const functions = store.get(\"functions\");\r\n  const { mutateObject } = functions;\r\n\r\n  const handleChange = e => {\r\n    e.persist();\r\n\r\n    store.set(\"settings\")(\r\n      mutateObject(\r\n        settings,\r\n        props.effect.properties,\r\n        e.target.name,\r\n        e.target.value\r\n      )\r\n    );\r\n  };\r\n\r\n  const loopPorps = () => {\r\n    var indents = [];\r\n    const properties = props.effect.properties;\r\n\r\n    for (let key in properties) {\r\n      if (properties.hasOwnProperty(key)) {\r\n        if (key !== \"_unique\") {\r\n          indents.push(\r\n            <div className=\"col-24  flex  flex-wrap  pv1\">\r\n              <div className=\"col-12\">\r\n                {key} {Math.round(properties[key])}\r\n              </div>\r\n              <div className=\"col-12\">\r\n                <input\r\n                  onChange={handleChange}\r\n                  name={key}\r\n                  type=\"range\"\r\n                  min=\"0\"\r\n                  max=\"10\"\r\n                  value={Math.round(properties[key])}\r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n      }\r\n    }\r\n    return <div className=\"flex  flex-wrap\">{indents}</div>;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"col-4\">{props.effect.name}</div>\r\n      <div className=\"col-20\">{loopPorps()}</div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Effects;\r\n","import React, { useState } from \"react\";\r\nimport Store from \"../../../../store\";\r\n\r\nimport Modal from \"../../../modal\";\r\nimport Effects from \"./effetcs\";\r\n\r\nimport mutateObject from \"../../../../helpers/mutate-object\";\r\n\r\nfunction Row(props) {\r\n  const [modalActive, setModalActive] = useState(false);\r\n\r\n  const toggleModal = () => {\r\n    setModalActive(!modalActive);\r\n  };\r\n\r\n  const store = Store.useStore();\r\n\r\n  const toggleActive = () => {\r\n    store.set(\"settings\")(\r\n      mutateObject(\r\n        store.get(\"settings\"),\r\n        props.sample,\r\n        \"active\",\r\n        !props.sample.active\r\n      )\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div class=\"col-24  flex  flex-wrap  track-bar__item__modal__row\">\r\n      <div className=\"col-2  flex  align-center\">\r\n        <label class=\"switch\" for={`${props.sample.name}-toggle`}>\r\n          <input\r\n            type=\"checkbox\"\r\n            id={`${props.sample.name}-toggle`}\r\n            checked={props.sample.active}\r\n            name={`${props.sample.name}-toggle`}\r\n            onChange={toggleActive}\r\n          />\r\n          <div class=\"slider round\"></div>\r\n        </label>\r\n      </div>\r\n      <div className=\"col-10  flex  align-center\">\r\n        <p className=\"black  pl2\">{props.sample.name}</p>\r\n      </div>\r\n      <div className=\"col-10  flex  flex-wrap\">\r\n        <p\r\n          className=\"bg-black  white  pa2  dib  f7  shadow2   cp\"\r\n          onClick={toggleModal}\r\n        >\r\n          Effects\r\n        </p>\r\n        {props.sample.effects &&\r\n          props.sample.effects.map(effect => {\r\n            return (\r\n              <Modal\r\n                title={`${props.sample.name} Effects`}\r\n                type=\"secondary\"\r\n                isActive={modalActive}\r\n                toggleModal={toggleModal}\r\n              >\r\n                <Effects\r\n                  channel={props.channel}\r\n                  sample={props.sample}\r\n                  effect={effect}\r\n                />\r\n              </Modal>\r\n            );\r\n          })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Row;\r\n","import React, { useState } from \"react\";\r\nimport Store from \"../../../store\";\r\n\r\nimport Modal from \"../../modal\";\r\nimport Row from \"./row\";\r\n\r\nfunction ChannelManager(props) {\r\n  const store = Store.useStore();\r\n  const settings = store.get(\"settings\");\r\n  const [modalActive, setModalActive] = useState(false);\r\n\r\n  const toggleModal = () => {\r\n    setModalActive(!modalActive);\r\n  };\r\n\r\n  return (\r\n    <div className=\"col-6  track-bar__item\">\r\n      <div className=\"track-bar__item__modal-trigger-wrapper\">\r\n        <div\r\n          className=\"flex  flex-wrap  align-center  justify-center  track-bar__item__modal-trigger\"\r\n          onClick={toggleModal}\r\n        >\r\n          {props.name}\r\n        </div>\r\n      </div>\r\n\r\n      <Modal\r\n        title=\"Channel Manager\"\r\n        type=\"primary\"\r\n        isActive={modalActive}\r\n        toggleModal={toggleModal}\r\n      >\r\n        <div className=\"w-100  flex  flex-wrap  pv3  ph3\">\r\n          {settings.categories.map(channel => {\r\n            return (\r\n              <>\r\n                {channel.samples.map(sample => {\r\n                  if (channel.name === props.name) {\r\n                    return <Row channel={channel} sample={sample} />;\r\n                  }\r\n                })}\r\n              </>\r\n            );\r\n          })}\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChannelManager;\r\n","import React from 'react';\r\nimport ChannelManager from './channel-manager';\r\nimport Store from '../../store';\r\n\r\nfunction SessionView() {\r\n  const store = Store.useStore();\r\n  const settings = store.get('settings');\r\n\r\n  return (\r\n    <div className=\"w-100  flex  flex-wrap  track-bar\">\r\n      {settings.categories.map(item => {\r\n        return <ChannelManager {...item} />;\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SessionView;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport Wad from \"web-audio-daw\";\r\nimport isEqual from \"lodash/isEqual\";\r\nimport last from \"lodash/last\";\r\n\r\nimport Store from \"../../../../../store\";\r\n\r\n// import Store from '../../../../store';\r\n// import mutateObject from '../../../../helpers/mutate-object';\r\n\r\n// const useCompare = (val: any) => {\r\n//     const prevVal = usePrevious(val)\r\n//     // console.log('prevVal', prevVal);\r\n//     // console.log('val', val);\r\n//     return !isEqual(prevVal, val)\r\n// }\r\n//\r\n// const usePrevious = (value) => {\r\n//     const ref = useRef();\r\n//     useEffect(() => {\r\n//       ref.current = value;\r\n//     });\r\n//     return ref.current;\r\n// }\r\n\r\nfunction Loop(props) {\r\n  const [loop, setLoop] = useState(props.loop);\r\n  const [sample, setSample] = useState(props.sample);\r\n  const [sound, setSound] = useState(null);\r\n  const [loopFinalised, setLoopFinalised] = useState(false);\r\n\r\n  const store = Store.useStore();\r\n  const cueLoop = store.get(\"cueLoop\");\r\n  const loops = store.get(\"loops\");\r\n\r\n\r\n\r\n\r\n  // const handleLooping = () => {\r\n  //   console.log('handleLooping');\r\n  //   if (hasLoopsChanged || inititalLoopFlag) {\r\n  //     console.log('handleLooping', props.loop);\r\n  //     console.log('cueLoop.loopTime', cueLoop.loopTime);\r\n  //\r\n  //\r\n  //\r\n  //   setInititalLoopFlag(false);\r\n  //   }\r\n  // }\r\n\r\n  useEffect(() => {\r\n    if (sample.effects && sample.effects.length) {\r\n      handleEffects();\r\n    } else {\r\n      const wadSample = new Wad({ source: sample.file });\r\n      setSound(wadSample);\r\n    }\r\n  }, []);\r\n\r\n  const handleEffects = () => {\r\n    var i;\r\n    for (i = 0; i < sample.effects.length; i++) {\r\n      const effect = sample.effects[i];\r\n      const propertyArray = {};\r\n\r\n      for (let key in effect.properties) {\r\n        if (effect.properties.hasOwnProperty(key)) {\r\n          if (key !== \"_unique\") {\r\n            propertyArray[key] = effect.properties[key] / 10;\r\n          }\r\n        }\r\n      }\r\n\r\n      const wadSample = new Wad({\r\n        source: sample.file,\r\n        [effect.name]: propertyArray\r\n      });\r\n\r\n      setSound(wadSample);\r\n    }\r\n  };\r\n\r\n  const handleSampleInterval = () => {\r\n    if (!loopFinalised) {\r\n      let sampleTimeout = sampleTimeout = sample.timeStamp - cueLoop.loopTime - (loop.timeline[0].timeStamp - cueLoop.loopTime);\r\n\r\n      // If initial loop has already happened\r\n      if (sample.timeFromStartOfLoop > 0) {\r\n        sampleTimeout += loop.timeline[0].timeFromStartOfLoop\r\n      }\r\n\r\n      const executeOrder = () => {\r\n        setTimeout(() => {\r\n          // if (props.loopIndex === 1) console.log('loop', loop);\r\n          // sound.stop();\r\n          console.log('to', performance.now());\r\n          sound.play();\r\n        }, sampleTimeout);\r\n      };\r\n\r\n\r\n      setInterval(() => {\r\n        executeOrder();\r\n      }, cueLoop.loopTime);\r\n\r\n      executeOrder();\r\n      setLoopFinalised(true);\r\n    }\r\n  };\r\n\r\n  if (sample && sound) {\r\n    // console.log('timeline-item sample', sample);\r\n    // console.log('timeline-item loop', loop);\r\n\r\n    handleSampleInterval();\r\n    return (\r\n      <div className=\"col-24\">\r\n        <div className=\"flex  flex-wrap  align-center  justify-center  h-100\">\r\n          sample\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return false;\r\n}\r\n\r\nexport default Loop;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport Wad from \"web-audio-daw\";\r\nimport isEqual from \"lodash/isEqual\";\r\nimport last from \"lodash/last\";\r\n\r\nimport TimelineItem from \"./timeline-item\";\r\n\r\n// import Store from '../../../../store';\r\n// import mutateObject from '../../../../helpers/mutate-object';\r\n\r\n// const useCompare = (val: any) => {\r\n//     const prevVal = usePrevious(val)\r\n//     // console.log('prevVal', prevVal);\r\n//     // console.log('val', val);\r\n//     return !isEqual(prevVal, val)\r\n// }\r\n//\r\n// const usePrevious = (value) => {\r\n//     const ref = useRef();\r\n//     useEffect(() => {\r\n//       ref.current = value;\r\n//     });\r\n//     return ref.current;\r\n// }\r\n\r\nfunction Loop(props) {\r\n  const [loop, setLoop] = useState(props);\r\n\r\n  if (loop && loop.active && loop.loopCompleted) {\r\n    return (\r\n      <div className=\"col-24\">\r\n        <div className=\"flex  flex-wrap  align-center  justify-center  h-100\">\r\n          {loop.timeline.length > 0 &&\r\n            loop.timeline.map((sample, index) => {\r\n              return <TimelineItem sample={sample} loop={loop} loopIndex={props.loopIndex} sampleIndex={index} />;\r\n            })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return false;\r\n}\r\n\r\nexport default Loop;\r\n","import React, { useState } from \"react\";\r\n\r\nimport Loop from \"./loop\";\r\n\r\nimport Store from \"../../../store\";\r\nimport mutateObject from \"../../../helpers/mutate-object\";\r\n\r\nfunction CueLoop(props) {\r\n  const [isLooping, setIsLooping] = useState(false);\r\n\r\n  const store = Store.useStore();\r\n  const cueLoop = store.get(\"cueLoop\");\r\n  const loops = store.get(\"loops\");\r\n\r\n  const handleClick = () => {\r\n    console.log('from', performance.now());\r\n\r\n\r\n    const cueLoopNew = cueLoop;\r\n    const loopsNew = loops;\r\n\r\n    // Toggle looping\r\n    setIsLooping(!isLooping);\r\n    cueLoopNew.isLooping = !cueLoopNew.isLooping;\r\n\r\n    if (!loopsNew.length) return;\r\n\r\n    // if disabling loop, set loopCompleted on last object to true\r\n    if (!cueLoopNew.isLooping) {\r\n      // loopsNew[loopsNew.length - 1].endTime = performance.now();\r\n      //\r\n      // loopsNew[loopsNew.length - 1].duration =\r\n      //   loopsNew[loopsNew.length - 1].endTime - loopsNew[loopsNew.length - 1].startTime;\r\n\r\n      loopsNew[loopsNew.length - 1].loopCompleted = true;\r\n    }\r\n\r\n    // If first loop, set master loop time\r\n    if (loopsNew.length === 1) {\r\n      cueLoopNew.loopTime = performance.now() - loopsNew[0].startTime\r\n\r\n      setInterval(() => {\r\n        cueLoopNew.loopRestarted = performance.now()\r\n        // If loop is still active + last one hasn't been loopCompleted\r\n        // then automatically close loop.\r\n        if (cueLoopNew.isLooping && !loopsNew[loopsNew.length - 1].loopCompleted) {\r\n          handleClick();\r\n        }\r\n\r\n      }, cueLoopNew.loopTime);\r\n    }\r\n\r\n    store.set(\"cueLoop\")(cueLoopNew);\r\n    store.set(\"loops\")(loopsNew);\r\n  };\r\n\r\n  return (\r\n    <div onClick={handleClick} className=\"col-12  pa2  settings__cue-loop\">\r\n      <p className=\"bg-black  white  pa2  dib  f7  shadow2   cp\">\r\n        Cue {`${cueLoop.isLooping}`}\r\n      </p>\r\n\r\n      {loops.length > 0 &&\r\n        loops.map((loop, index) => {\r\n          if (loop.loopCompleted) {\r\n            return <Loop {...loop} loopIndex={index} />;\r\n          }\r\n        })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CueLoop;\r\n","import React from \"react\";\r\n\r\nimport CueLoop from \"./cue-loop\";\r\n\r\nfunction Settings() {\r\n  return (\r\n    <div className=\"w-100  flex  flex-wrap  track-bar\">\r\n      <CueLoop />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Settings;\r\n","import React, { useEffect } from \"react\";\r\n\r\nimport Store from \"../store\";\r\n\r\nimport SessionView from \"./session-view\";\r\nimport TrackBar from \"./track-bar\";\r\nimport Settings from \"./settings\";\r\n\r\nfunction Components(props) {\r\n  const store = Store.useStore();\r\n  const settings = store.get(\"settings\");\r\n  const loops = store.get(\"loops\");\r\n  const cueLoop = store.get(\"cueLoop\");\r\n  const functions = store.get(\"functions\");\r\n\r\n  useEffect(() => {\r\n    store.set(\"settings\")(props.store.settings);\r\n    store.set(\"loops\")(props.store.loops);\r\n    store.set(\"cueLoop\")(props.store.cueLoop);\r\n    store.set(\"functions\")(props.store.functions);\r\n  }, []);\r\n\r\n  const isObject = e => {\r\n    return typeof e === \"object\" && e !== null;\r\n  };\r\n\r\n  if (\r\n    isObject(settings) &&\r\n    isObject(loops) &&\r\n    isObject(cueLoop) &&\r\n    isObject(functions)\r\n  ) {\r\n    return (\r\n      <div className=\"flex\">\r\n        <div className=\"col-18  session__track-bar\">\r\n          <div className=\"flex\">\r\n            <SessionView />\r\n          </div>\r\n          <div className=\"flex\">\r\n            <TrackBar />\r\n          </div>\r\n        </div>\r\n        <div className=\"col-6\">\r\n          <Settings />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport default Components;\r\n","import sanityClient from \"@sanity/client\";\r\n\r\nexport default sanityClient({\r\n  // Find your project ID and dataset in `sanity.json` in your studio project\r\n  projectId: \"d5o9qdi6\",\r\n  dataset: \"production\",\r\n  useCdn: true\r\n  // useCdn == true gives fast, cheap responses using a globally distributed cache.\r\n  // Set this to false if your application require the freshest possible\r\n  // data always (potentially slightly slower and a bit more expensive).\r\n});\r\n","import mutateObject from \"../../helpers/mutate-object\";\r\n\r\nconst keyArr = [];\r\nconst randomKey = () => {\r\n  const number = Math.floor(Math.random() * 100001);\r\n  if (keyArr.includes(number)) {\r\n    return randomKey();\r\n  }\r\n\r\n  keyArr.push(number);\r\n  return number;\r\n};\r\n\r\nconst mapSamples = data => {\r\n  const categories = [];\r\n\r\n  // Loop Categories\r\n  for (var i = 0; i < data.length; i++) {\r\n    const currentCategory = data[i];\r\n\r\n    const category = {\r\n      _key: randomKey(),\r\n      slug: currentCategory.slug,\r\n      name: currentCategory.name,\r\n      samples: []\r\n    };\r\n\r\n    // Loop Packs to extract samples\r\n    for (var ii = 0; ii < currentCategory.packs.length; ii++) {\r\n      const currentPack = currentCategory.packs[ii];\r\n\r\n      // Loop samples and add to Category samples\r\n      for (var iii = 0; iii < currentPack.samples.length; iii++) {\r\n        const currentSample = currentPack.samples[iii];\r\n\r\n        if (!currentSample.file) continue;\r\n\r\n        const pack = {\r\n          _key: randomKey(),\r\n          slug: currentSample.slug,\r\n          name: currentSample.name,\r\n          pack: currentPack.name,\r\n          active: true,\r\n          file: currentSample.file.asset._ref\r\n            .replace(\"file-\", \"https://cdn.sanity.io/files/d5o9qdi6/production/\")\r\n            .replace(\"-mp3\", \".mp3\")\r\n            .replace(\"-wav\", \".wav\"),\r\n          effects: [\r\n            {\r\n              _unique: 236472,\r\n              name: \"delay\",\r\n              test: 1,\r\n              properties: {\r\n                _unique: 236472,\r\n                delayTime: 0,\r\n                wet: 0,\r\n                feedback: 0\r\n              }\r\n            }\r\n          ]\r\n        };\r\n\r\n        category.samples.push(pack);\r\n      }\r\n    }\r\n\r\n    categories.push(category);\r\n  }\r\n\r\n  return categories;\r\n};\r\n\r\nexport const mapSettingsFromData = data => {\r\n  const store = {};\r\n\r\n  // Loops\r\n  store.loops = [];\r\n\r\n  // Cue Loop\r\n  store.cueLoop = {\r\n    _key: randomKey(),\r\n    isLooping: false,\r\n    loopTime: null,\r\n    loopRestarted: null,\r\n  };\r\n\r\n  // Functions\r\n  store.functions = {\r\n    mutateObject: mutateObject\r\n  };\r\n\r\n  // Settings\r\n  store.settings = {\r\n    categories: mapSamples(data)\r\n  };\r\n\r\n  return store;\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport Store from \"./store\";\r\nimport Components from \"./components\";\r\n\r\nimport \"./styles.scss\";\r\n\r\nimport sanity from \"./store/sanity\";\r\nimport { mapSettingsFromData } from \"./store/map-settings-from-data\";\r\n\r\nfunction App() {\r\n  const [isFetching, setFetching] = useState(false);\r\n  const [data, setData] = useState([]);\r\n\r\n  const fetchData = async () => {\r\n    const params = {\r\n      currentCategory: null\r\n    };\r\n\r\n    const queryCategory = `\r\n      *[_type == \"category\"] {\r\n        \"slug\": slug.current,\r\n        \"name\": title,\r\n      }\r\n    `;\r\n\r\n    const queryPacks = `\r\n      *[_type == \"pack\"] {\r\n        \"slug\": slug.current,\r\n        \"name\": title,\r\n        \"samples\": *[_type == \"sample\" && references(*[_type==\"category\" && title == $currentCategory]._id) && references(^._id)] {\r\n          \"slug\": slug.current,\r\n          \"name\": title,\r\n          ...,\r\n        }\r\n      }\r\n    `;\r\n\r\n    const data = [];\r\n\r\n    const request = await sanity.fetch(queryCategory).then(sanityCategories => {\r\n      if (sanityCategories) {\r\n        const forLoop = async () => {\r\n          for (let i = 0; i < sanityCategories.length; i++) {\r\n            params.currentCategory = sanityCategories[i].name;\r\n\r\n            const category = {\r\n              slug: sanityCategories[i].slug,\r\n              name: sanityCategories[i].name,\r\n              packs: null\r\n            };\r\n\r\n            await sanity.fetch(queryPacks, params).then(sanityPacks => {\r\n              if (sanityPacks) {\r\n                category.packs = sanityPacks;\r\n              } else {\r\n                console.warn(\"Error retrieving pack\");\r\n              }\r\n            });\r\n\r\n            data.push(category);\r\n          }\r\n\r\n          return data;\r\n        };\r\n\r\n        return forLoop();\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n\r\n    return request;\r\n  };\r\n\r\n  useEffect(function fetch() {\r\n    (async function() {\r\n      setFetching(true);\r\n      setData(await fetchData());\r\n      setFetching(false);\r\n    })();\r\n  }, []);\r\n\r\n  if (isFetching) {\r\n    return <div>Fetching data....</div>;\r\n  }\r\n\r\n  if (data.length) {\r\n    return (\r\n      <div className=\"App\">\r\n        <Store.Container>\r\n          <Components store={mapSettingsFromData(data)} />\r\n        </Store.Container>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\n\r\nReactDOM.render(\r\n  <App />,\r\n\r\n  rootElement\r\n);\r\n"],"sourceRoot":""}